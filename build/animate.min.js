/*! Animate 2015-01-01 */
var Animate=function(){this.animations=[]};Animate.clone=function(a){var b;if(null==a||"object"!=typeof a)return a;if(a instanceof Date)return b=new Date,b.setTime(a.getTime()),b;if(a instanceof Array)return a.slice(0);if(a instanceof Object){b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=Animate.clone(a[c]));return b}throw new Error("Unable to copy obj! Its type isn't supported.")},Animate.prototype.update=function(){var a=window.performance.now();requestAnimationFrame(_AnimateUpdate);for(var b=0;b<this.animations.length;b++)this.animations[b].update(a)},Animate.prototype.addAnimation=function(a){return this.animations.push(a),this.update(),window.performance.now()};var _Animate=new Animate,_AnimateUpdate=function(){_Animate.update()};Animate.Vector2=function(a,b){this.x=0,this.y=0,a&&(this.x=a),b&&(this.y=b)},Animate.Vector2.prototype.constructor=Animate.Vector2,Animate.Sequence=function(a){this.t1=0,this.t2=0,this.active=!1,this.options=Animate.clone(a)},Animate.Sequence.prototype.constructor=Animate.Sequence,Animate.Sequence.prototype.reset=function(){this.options&&this.options.hasOwnProperty("end")&&(this.t2=this.options.end,this.options.hasOwnProperty("start")&&(this.t1=this.options.start)),this.dt=this.t2-this.t1},Animate.Sequence.prototype.update=function(a,b){this.active=b>=this.t1&&b<this.t2?!0:!1},Animate.TransformSequence=function(a){Animate.Sequence.call(this,a),this.x1=0,this.y1=0,this.x2=0,this.y2=0},Animate.TransformSequence.prototype=new Animate.Sequence,Animate.TransformSequence.base=Animate.Sequence.prototype,Animate.TransformSequence.prototype.constructor=Animate.TransformSequence,Animate.TransformSequence.prototype.reset=function(a){Animate.TransformSequence.base.reset.call(this,a),this.options&&(this.options.from&&void 0!=this.options.from.x&&(this.x1=this.options.from.x),this.options.from&&void 0!=this.options.from.y&&(this.y1=this.options.from.y),this.options.to&&void 0!=this.options.to.x&&(this.x2=this.options.to.x),this.options.to&&void 0!=this.options.to.y&&(this.y2=this.options.to.y)),this.dx=this.x2-this.x1,this.dy=this.y2-this.y1},Animate.TransformSequence.prototype.update=function(a,b){if(Animate.TransformSequence.base.update.call(this,a,b),this.active){var c=this.dx/this.dt*b+this.x1-this.dx/this.dt*this.t1,d=this.dy/this.dt*b+this.y1-this.dy/this.dt*this.t1;if(a.style.transform){var e=a.style.transform.indexOf("translate"),f=a.style.transform.indexOf(")",e);a.style.transform=a.style.transform.substr(0,e)+"translate("+c+"px ,"+d+"px)"+a.style.transform.substr(f+1)}else a.style.transform="translate("+c+"px ,"+d+"px)"}},Animate.ScaleSequence=function(a){Animate.Sequence.call(this,a),this.s1=1,this.s2=1},Animate.ScaleSequence.prototype=new Animate.Sequence,Animate.ScaleSequence.base=Animate.Sequence.prototype,Animate.ScaleSequence.prototype.constructor=Animate.ScaleSequence,Animate.ScaleSequence.prototype.reset=function(a){Animate.ScaleSequence.base.reset.call(this,a),this.options&&(void 0!==this.options.to&&(this.s2=this.options.to),void 0!==this.options.from&&(this.s1=this.options.from)),this.ds=this.s2-this.s1},Animate.ScaleSequence.prototype.update=function(a,b){if(Animate.ScaleSequence.base.update.call(this,a,b),this.active){var c=this.ds/this.dt*b+this.s1-this.ds/this.dt*this.t1;if(a.style.transform){var d=a.style.transform.indexOf("scale"),e=a.style.transform.indexOf(")",d);-1===d?a.style.transform+=" scale("+c+")":a.style.transform=a.style.transform.substr(0,d)+"scale("+c+")"+a.style.transform.substr(e+1)}else a.style.transform="scale("+c+")"}},Animate.ProjectileSequence=function(a){Animate.Sequence.call(this,a),this.position1=new Animate.Vector2,this.position2=new Animate.Vector2,this.velocity=new Animate.Vector2,this.acceleration=new Animate.Vector2,this.lastTime=0},Animate.ProjectileSequence.prototype=new Animate.Sequence,Animate.ProjectileSequence.base=Animate.Sequence.prototype,Animate.ProjectileSequence.prototype.constructor=Animate.ProjectileSequence,Animate.ProjectileSequence.prototype.reset=function(a){Animate.ProjectileSequence.base.reset.call(this,a),this.options&&(this.options.acceleration&&void 0!==this.options.acceleration.x&&(this.acceleration.x=this.options.acceleration.x/1e6),this.options.acceleration&&void 0!==this.options.acceleration.y&&(this.acceleration.y=this.options.acceleration.y/1e6),this.options.velocity&&void 0!==this.options.velocity.x&&(this.velocity.x=this.options.velocity.x),this.options.velocity&&void 0!==this.options.velocity.y&&(this.velocity.y=this.options.velocity.y),this.options.from&&void 0!==this.options.from.x&&(this.position1.x=this.options.from.x),this.options.from&&void 0!==this.options.from.y&&(this.position1.y=this.options.from.y),this.options.to&&void 0!==this.options.to.x&&(this.position2.x=this.options.to.x),this.options.to&&void 0!==this.options.to.y&&(this.position2.y=this.options.to.y))},Animate.ProjectileSequence.prototype.update=function(a,b){if(Animate.ProjectileSequence.base.update.call(this,a,b),this.active&&0!==this.lastTime){var c=b-this.lastTime;if(this.position1.x+=this.velocity.x*c,this.position1.y+=this.velocity.y*c,a.style.transform){var d=a.style.transform.indexOf("translate"),e=a.style.transform.indexOf(")",d);a.style.transform=a.style.transform.substr(0,d)+"translate("+this.position1.x+"px ,"+this.position1.y+"px)"+a.style.transform.substr(e+1)}else a.style.transform="translate("+this.position1.x+"px ,"+this.position1.y+"px)";this.velocity.x=this.velocity.x+this.acceleration.x*c,this.velocity.y=this.velocity.y+this.acceleration.y*c}this.lastTime=b},Animate.Rotate3DSequence=function(a){Animate.Sequence.call(this,a),this.rx1=0,this.rx2=0,this.ry1=0,this.ry2=0,this.rz1=0,this.rz2=0},Animate.Rotate3DSequence.prototype=new Animate.Sequence,Animate.Rotate3DSequence.base=Animate.Sequence.prototype,Animate.Rotate3DSequence.prototype.constructor=Animate.Rotate3DSequence,Animate.Rotate3DSequence.prototype.reset=function(a){Animate.Rotate3DSequence.base.reset.call(this,a),this.options&&(this.options.from&&void 0!==this.options.from.x&&(this.rx1=this.options.from.x),this.options.from&&void 0!==this.options.from.y&&(this.ry1=this.options.from.y),this.options.from&&void 0!==this.options.from.z&&(this.rz1=this.options.from.z),this.options.to&&void 0!==this.options.to.x&&(this.rx2=this.options.to.x),this.options.to&&void 0!==this.options.to.y&&(this.ry2=this.options.to.y),this.options.to&&void 0!==this.options.to.z&&(this.rz2=this.options.to.z)),this.drx=this.rx2-this.rx1,this.dry=this.ry2-this.ry1,this.drz=this.rz2-this.rz1},Animate.Rotate3DSequence.prototype.update=function(a,b){if(Animate.Rotate3DSequence.base.update.call(this,a,b),this.active)for(var c,d=this.drx/this.dt*b+this.rx1-this.drx/this.dt*this.t1,e=this.dry/this.dt*b+this.ry1-this.dry/this.dt*this.t1,f=this.drz/this.dt*b+this.rz1-this.drz/this.dt*this.t1,g=0;3>g;g++){var h="rotate";switch(g){case 0:h+="X",c=d;break;case 1:h+="Y",c=e;break;case 2:h+="Z",c=f}if(a.style.transform){var i=a.style.transform.indexOf(h),j=a.style.transform.indexOf(")",i);-1===i?a.style.transform+=" "+h+"("+c+"deg)":a.style.transform=a.style.transform.substr(0,i)+h+"("+c+"deg)"+a.style.transform.substr(j+1)}else a.style.transform=h+"("+c+"deg)"}},Animate.Animation=function(a){this.el=a,this.sequences=[],this.state=0,this.startTime=0},Animate.Animation.prototype.constructor=Animate.Animation,Animate.Animation.prototype.addSequence=function(a){return a.reset(),this.sequences.push(a),this},Animate.Animation.prototype.removeSequence=function(){},Animate.Animation.prototype.reset=function(){for(var a=0;a<this.sequences.length;a++)this.sequences[a].reset(this.el)},Animate.Animation.prototype.start=function(){this.state=1,this.startTime=_Animate.addAnimation(this)},Animate.Animation.prototype.pause=function(){this.state=2},Animate.Animation.prototype.stop=function(){this.state=0},Animate.Animation.prototype.load=function(a){if(a.sequences)for(var b=0;b<a.sequences.length;b++){var c=a.sequences[b],d=null;switch(c.type){case"transform":d=new Animate.TransformSequence(c);break;case"scale":d=new Animate.ScaleSequence(c);break;case"rotate":d=new Animate.RotateSequence(c);break;case"rotate3d":d=new Animate.Rotate3DSequence(c);break;case"projectile":d=new Animate.ProjectileSequence(c)}d&&this.addSequence(d)}return this},Animate.Animation.prototype.update=function(a){for(var b=a-this.startTime,c=0;c<this.sequences.length;c++)this.sequences[c].update(this.el,b)};